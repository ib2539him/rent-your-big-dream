var booked_load_calendar_date_booking_options,booked_appt_form_options,bookedNewAppointment;function create_booked_modal(){var e=jQuery(window).height(),e=720<jQuery(window).width()?e-295:e;jQuery("body input, body textarea, body select").blur(),jQuery("body").addClass("booked-noScroll"),jQuery('<div class="booked-modal bm-loading"><div class="bm-overlay"></div><div class="bm-window"><div style="height:100px"></div></div></div>').appendTo("body"),jQuery(".booked-modal .bm-overlay").spin("booked_white"),jQuery(".booked-modal .bm-window").css({"max-height":e+"px"})}!function(_,s,r){var e=_(s);function d(){_("div.booked-calendar").find(".bc-row.week").each(function(){0==_(this).children().length&&_(this).remove()})}function l(e,o){var t,a;e=void 0===e||e,o=(o=void 0!==o&&o)?(t=o.find("li.active .savingState, .topSavingState.savingState, .calendarSavingState"),a=o.find(".monthName"),o.find("div.booked-calendar .bc-body")):(t=_("li.active .savingState, .topSavingState.savingState, .calendarSavingState"),a=_(".monthName"),_("div.booked-calendar .bc-body")),e?(t.fadeIn(200),a.hide(),o.animate({opacity:.2},100)):(t.hide(),a.show(),o.animate({opacity:1},0))}function i(){_(".booked_list_date_picker").each(function(){var e=_(this),o=e.parents(".booked-appt-list").attr("data-min-date"),t=e.parents(".booked-appt-list").attr("data-max-date");void 0===o&&(o=e.attr("data-min-date")),e.datepicker({dateFormat:"yy-mm-dd",minDate:o,maxDate:t,showAnim:!1,beforeShow:function(e,o){_("#ui-datepicker-div").removeClass(),_("#ui-datepicker-div").addClass("booked_custom_date_picker")},onClose:function(e){_(".booked_list_date_picker_trigger").removeClass("booked-dp-active")},onSelect:function(e){var o=_(this),t=o.parents(".booked-list-view"),a=t.attr("data-default"),o=o.parents(".booked-list-view-nav").attr("data-calendar-id"),e=(void 0===a&&(a=!1),o=o||0,t.addClass("booked-loading"),{action:"booked_appointment_list_date",nonce:booked_js_vars.nonce,date:e,calendar_id:o,force_default:a});return _(r).trigger("booked-before-loading-appointment-list-booking-options"),t.spin("booked_top"),_.ajax({url:booked_js_vars.ajax_url,type:"post",data:e,success:function(e){t.html(e),i(),setTimeout(function(){t.removeClass("booked-loading")},1)}}),!1}})}),_("body").on("click",".booked_list_date_picker_trigger",function(e){e.preventDefault(),_(this).hasClass("booked-dp-active")||(_(this).addClass("booked-dp-active"),_(this).parents(".booked-appt-list").find(".booked_list_date_picker").datepicker("show"))})}_.fn.spin.presets.booked={lines:10,length:7,width:5,radius:11,corners:1,rotate:0,direction:1,color:"#555",speed:1,trail:60,shadow:!1,hwaccel:!1,className:"booked-spinner",zIndex:2e9,top:"50%",left:"50%"},_.fn.spin.presets.booked_top={lines:11,length:10,width:6,radius:15,corners:1,rotate:0,scale:.5,direction:1,color:"#aaaaaa",speed:1,trail:60,shadow:!1,hwaccel:!1,className:"booked-spinner booked-spinner-top",zIndex:2e9,top:"15px",left:"50%"},_.fn.spin.presets.booked_white={lines:13,length:11,width:5,radius:18,scale:1,corners:1,rotate:0,direction:1,color:"#fff",speed:1,trail:60,shadow:!1,hwaccel:!1,className:"booked-spinner booked-white",zIndex:2e9,top:"50%",left:"50%"},e.on("resize",function(){adjust_calendar_boxes(),resize_booked_modal()}),e.on("load",function(){a.Init(),adjust_calendar_boxes(),_(".booked-calendar-wrap").each(function(){var e=_(this),o=e.find("div.booked-calendar").attr("data-calendar-date");e.attr("data-default",o),init_tooltips(e)}),_(".booked-list-view").each(function(){var e=_(this),o=e.find(".booked-appt-list").attr("data-list-date");e.attr("data-default",o)}),d(),i(),_(".booked_calendar_chooser").change(function(e){e.preventDefault();var o,t,a,n=_(this);return n.parents(".booked-calendarSwitcher").hasClass("calendar")?(void 0===(t=(o=n.parents(".booked-calendar-shortcode-wrap").find(".booked-calendar-wrap")).attr("data-default"))&&(t=!1),a={action:"booked_calendar_month",nonce:booked_js_vars.nonce,gotoMonth:t,calendar_id:n.val()},l(!0,o),_.ajax({url:booked_js_vars.ajax_url,type:"post",data:a,success:function(e){o.html(e),adjust_calendar_boxes(),d(),init_tooltips(o),_(s).trigger("booked-load-calendar",a,n)}})):(t=(o=n.parents(".booked-calendar-shortcode-wrap").find(".booked-list-view")).attr("data-default"),n.parents(".booked-calendarSwitcher").hasClass("calendar"),void 0===t&&(t=!1),o.addClass("booked-loading"),a={action:"booked_appointment_list_date",nonce:booked_js_vars.nonce,date:t,calendar_id:n.val()},_(r).trigger("booked-before-loading-appointment-list-booking-options"),o.spin("booked_top"),_.ajax({url:booked_js_vars.ajax_url,type:"post",data:a,success:function(e){o.html(e),i(),setTimeout(function(){o.removeClass("booked-loading")},1)}})),!1}),_("body").on("click",".booked-calendar-wrap .page-right, .booked-calendar-wrap .page-left, .booked-calendar-wrap .monthName a",function(e){e.preventDefault();var o=_(this),e=o.attr("data-goto"),t=o.parents(".booked-calendar-wrap"),a=t.attr("data-default"),n=o.parents("div.booked-calendar").attr("data-calendar-id"),i=(void 0===a&&(a=!1),{action:"booked_calendar_month",nonce:booked_js_vars.nonce,gotoMonth:e,calendar_id:n,force_default:a});return l(!0,t),_.ajax({url:booked_js_vars.ajax_url,type:"post",data:i,success:function(e){t.html(e),adjust_calendar_boxes(),d(),init_tooltips(t),_(s).trigger("booked-load-calendar",i,o)}}),!1}),_("body").on("click",".booked-calendar-wrap .bc-row.week .bc-col",function(e){e.preventDefault();var e=_(this),o=e.parents("div.booked-calendar"),t=e.parent(),a=e.attr("data-date"),n=o.attr("data-calendar-id");t.find(".bc-col").length;var i,n=n||0;e.hasClass("blur")||e.hasClass("booked")&&!booked_js_vars.publicAppointments||e.hasClass("prev-date")||(e.hasClass("active")?(e.removeClass("active"),_(".bc-row.entryBlock").remove(),i=o.height(),o.parent().height(i)):(_(".bc-row.week .bc-col").removeClass("active"),e.addClass("active"),_(".bc-row.entryBlock").remove(),t.after('<div class="bc-row entryBlock booked-loading"><div class="bc-col"></div></div>'),_(".bc-row.entryBlock").find(".bc-col").spin("booked"),booked_load_calendar_date_booking_options={action:"booked_calendar_date",nonce:booked_js_vars.nonce,date:a,calendar_id:n},_(r).trigger("booked-before-loading-calendar-booking-options"),i=o.height(),o.parent().height(i),_.ajax({url:booked_js_vars.ajax_url,type:"post",data:booked_load_calendar_date_booking_options,success:function(e){_(".bc-row.entryBlock").find(".bc-col").html(e),_(".bc-row.entryBlock").removeClass("booked-loading"),_(".bc-row.entryBlock").find(".booked-appt-list").fadeIn(300),_(".bc-row.entryBlock").find(".booked-appt-list").addClass("shown"),adjust_calendar_boxes()}})))}),_("body").on("click",".booked-list-view .booked-list-view-date-prev, .booked-list-view .booked-list-view-date-next",function(e){e.preventDefault();var e=_(this),o=e.attr("data-date"),t=e.parents(".booked-list-view"),a=t.attr("data-default"),e=e.parents(".booked-list-view-nav").attr("data-calendar-id"),o=(void 0===a&&(a=!1),e=e||0,t.addClass("booked-loading"),{action:"booked_appointment_list_date",nonce:booked_js_vars.nonce,date:o,calendar_id:e,force_default:a});return _(r).trigger("booked-before-loading-appointment-list-booking-options"),t.spin("booked_top"),_.ajax({url:booked_js_vars.ajax_url,type:"post",data:o,success:function(e){t.html(e),i(),setTimeout(function(){t.removeClass("booked-loading")},1)}}),!1}),bookedNewAppointment=function(e){e.preventDefault();var e=_(this),o=e.attr("data-title"),t=e.attr("data-timeslot"),a=e.attr("data-date"),n=e.attr("data-calendar-id"),i=(e.parents(".timeslot"),e.parents(".booked-calendar-wrap").hasClass("booked-list-view")),i=(void 0!==i&&i?e.parents(".booked-list-view").find(".booked-list-view-nav"):e.parents("div.booked-calendar")).attr("data-calendar-id"),n=i||n;return booked_appt_form_options={action:"booked_new_appointment_form",nonce:booked_js_vars.nonce,date:a,timeslot:t,calendar_id:n,title:o},_(r).trigger("booked-before-loading-booking-form"),create_booked_modal(),setTimeout(function(){_.ajax({url:booked_js_vars.ajax_url,type:"post",data:booked_appt_form_options,success:function(e){_(".bm-window").html(e);var e=_(".booked-modal"),o=e.find(".bm-window");o.css({visibility:"hidden"}),e.removeClass("bm-loading"),_(r).trigger("booked-on-new-app"),resize_booked_modal(),o.hide(),_(".booked-modal .bm-overlay").find(".booked-spinner").remove(),setTimeout(function(){o.css({visibility:"visible"}),o.show()},50)}})},100),!1},_("body").on("click",".booked-calendar-wrap button.new-appt",bookedNewAppointment);var e,o=_(".booked-tabs"),u=(o.find("li.active").length||o.find("li:first-child").addClass("active"),o.length&&(_(".booked-tab-content").hide(),e=(e=(e=o.find(".active > a").attr("href")).split("#"))[1],_("#profile-"+e).show(),o.find("li > a").on("click",function(e){e.preventDefault(),_(".booked-tab-content").hide(),o.find("li").removeClass("active"),_(this).parent().addClass("active");e=(e=(e=_(this).attr("href")).split("#"))[1];return _("#profile-"+e).show(),!1})),_("body").on("click",".booked-profile-appt-list .booked-show-cf",function(e){e.preventDefault();e=_(this).parent().find(".cf-meta-values-hidden");return e.is(":visible")?(e.hide(),_(this).removeClass("booked-cf-active")):(e.show(),_(this).addClass("booked-cf-active")),!1}),_("#loginform").length&&_('#loginform input[type="submit"]').on("click",function(e){_('#loginform input[name="log"]').val()&&_('#loginform input[name="pwd"]').val()?_("#loginform .booked-custom-error").hide():_("#loginform").parents(".booked-form-wrap").length&&(e.preventDefault(),_("#loginform").parents(".booked-form-wrap").find(".booked-custom-error").fadeOut(200).fadeIn(200))}),_("#profile-forgot").length&&_('#profile-forgot input[type="submit"]').on("click",function(e){_('#profile-forgot input[name="user_login"]').val()?_("#profile-forgot .booked-custom-error").hide():(e.preventDefault(),_("#profile-forgot").find(".booked-custom-error").fadeOut(200).fadeIn(200))}),_(".booked-upload-wrap").length&&_(".booked-upload-wrap input[type=file]").on("change",function(){var e=_(this).val();_(this).parent().find("span").html(e),_(this).parent().addClass("hasFile")}),_("body").on("click",".booked-profile-appt-list .appt-block .cancel",function(e){e.preventDefault();var o,e=_(this).parents(".appt-block"),t=e.attr("data-appt-id");return 1==(confirm_delete=confirm(booked_js_vars.i18n_confirm_appt_delete))&&(o=parseInt(_(".booked-profile-appt-list").find("h4").find("span.count").html()),(o=parseInt(o-1))<1?(_(".booked-profile-appt-list").find("h4").find("span.count").html("0"),_(".no-appts-message").slideDown("fast")):_(".booked-profile-appt-list").find("h4").find("span.count").html(o),_(".appt-block").animate({opacity:.4},0),e.slideUp("fast",function(){_(this).remove()}),_.ajax({url:booked_js_vars.ajax_url,method:"post",data:{action:"booked_cancel_appt",nonce:booked_js_vars.nonce,appt_id:t},success:function(e){_(".appt-block").animate({opacity:1},150)}})),!1}),_("body").on("touchstart click",".bm-overlay, .bm-window .close, .booked-form .cancel",function(e){return e.preventDefault(),close_booked_modal(),!1}),_("body").on("focusin",".booked-form input",function(){this.title==this.value&&(_(this).addClass("hasContent"),this.value="")}).on("focusout",".booked-form input",function(){""===this.value&&(_(this).removeClass("hasContent"),this.value=this.title)}),_("body").on("change",".booked-form input",function(){var e=_(this).attr("data-condition"),o=_(this).val();e&&_(".condition-block").length&&(_(".condition-block."+e).hide(),_("#condition-"+o).fadeIn(200),resize_booked_modal())}),_("body").on("submit","form#ajaxlogin",function(e){e.preventDefault(),_("form#ajaxlogin p.status").show().html('<i class="fa-solid fa-circle-notch fa-spin"></i>&nbsp;&nbsp;&nbsp;'+booked_js_vars.i18n_please_wait),resize_booked_modal();var o=_(this),t=o.data("date"),a=o.data("title"),n=o.data("timeslot"),i=o.data("calendar-id");_.ajax({type:"post",url:booked_js_vars.ajax_url,data:_("form#ajaxlogin").serialize(),success:function(e){"success"==e?(close_booked_modal(),(e=_('<button data-title="'+a+'" data-timeslot="'+n+'" data-date="'+t+'" data-calendar-id="'+i+'"></button>')).on("click",s.bookedNewAppointment),e.triggerHandler("click"),e.unbind("click",s.bookedNewAppointment),e.detach()):(_("form#ajaxlogin p.status").show().html('<i class="fa-solid fa-triangle-exclamation" style="color:#E35656"></i>&nbsp;&nbsp;&nbsp;'+booked_js_vars.i18n_wrong_username_pass),resize_booked_modal())}}),e.preventDefault()}),_("body").on("click",".booked-forgot-password",function(e){e.preventDefault(),_("#ajaxlogin").hide(),_("#ajaxforgot").show(),resize_booked_modal()}),_("body").on("click",".booked-forgot-goback",function(e){e.preventDefault(),_("#ajaxlogin").show(),_("#ajaxforgot").hide(),resize_booked_modal()}),_("body").on("submit","form#ajaxforgot",function(o){o.preventDefault(),_("form#ajaxforgot p.status").show().html('<i class="fa-solid fa-circle-notch fa-spin"></i>&nbsp;&nbsp;&nbsp;'+booked_js_vars.i18n_please_wait),resize_booked_modal(),_(this),_.ajax({type:"post",url:booked_js_vars.ajax_url,data:_("form#ajaxforgot").serialize(),success:function(e){"success"==e?(o.preventDefault(),_("#ajaxlogin").show(),_("#ajaxforgot").hide(),_("form#ajaxlogin p.status").show().html('<i class="fa-solid fa-check" style="color:#56c477"></i>&nbsp;&nbsp;&nbsp;'+booked_js_vars.i18n_password_reset)):_("form#ajaxforgot p.status").show().html('<i class="fa-solid fa-triangle-exclamation" style="color:#E35656"></i>&nbsp;&nbsp;&nbsp;'+booked_js_vars.i18n_password_reset_error),resize_booked_modal()}}),o.preventDefault()}),_("body").on("click",".booked-form input#submit-request-appointment",function(e){_("form#newAppointmentForm p.status").show().html('<i class="fa-solid fa-circle-notch fa-spin"></i>&nbsp;&nbsp;&nbsp;'+booked_js_vars.i18n_please_wait),resize_booked_modal(),e.preventDefault();var e=_("#newAppointmentForm input[name=customer_type]").val(),o=_("#newAppointmentForm input[name=user_id]").val(),t=_("#newAppointmentForm input[name=booked_appt_name]").val(),a=_("#newAppointmentForm input[name=booked_appt_surname]").val(),n=_("#newAppointmentForm input[name=booked_appt_surname]").length,i=_("#newAppointmentForm input[name=guest_name]").val(),s=_("#newAppointmentForm input[name=guest_surname]").val(),r=_("#newAppointmentForm input[name=guest_surname]").length,d=_("#newAppointmentForm input[name=guest_email]").val(),l=_("#newAppointmentForm input[name=guest_email]").length,c=_("#newAppointmentForm input[name=booked_appt_email]").val(),p=_("#newAppointmentForm input[name=booked_appt_password]").val(),b=!1;return _(this).parents(".booked-form").find("input,textarea,select").each(function(e,o){var t,a,n,i=_(this).attr("required");i&&"hidden"==_(o).attr("type")?(n=(n=_(o).attr("name")).split("---"),fieldName=n[0],fieldNumber=(fieldNumber=n[1].split("___"))[0],"radio-buttons-label"==fieldName?(t=!1,_('input:radio[name="single-radio-button---'+fieldNumber+'[]"]:checked').each(function(){_(this).val()&&(t=_(this).val())}),t||(b=!0)):"checkboxes-label"==fieldName&&(a=!1,_('input:checkbox[name="single-checkbox---'+fieldNumber+'[]"]:checked').each(function(){_(this).val()&&(a=_(this).val())}),a||(b=!0))):i&&"hidden"!=_(o).attr("type")&&""==_(o).val()&&(b=!0)}),b?(_("form#newAppointmentForm p.status").show().html('<i class="fa-solid fa-triangle-exclamation" style="color:#E35656"></i>&nbsp;&nbsp;&nbsp;'+booked_js_vars.i18n_fill_out_required_fields),resize_booked_modal(),!1):"new"==e&&!t||"new"==e&&n&&!a||"new"==e&&!c||"new"==e&&!p?(_("form#newAppointmentForm p.status").show().html('<i class="fa-solid fa-triangle-exclamation" style="color:#E35656"></i>&nbsp;&nbsp;&nbsp;'+booked_js_vars.i18n_appt_required_fields),resize_booked_modal(),!1):"guest"==e&&!i||"guest"==e&&l&&!d||"guest"==e&&r&&!s?(_("form#newAppointmentForm p.status").show().html('<i class="fa-solid fa-triangle-exclamation" style="color:#E35656"></i>&nbsp;&nbsp;&nbsp;'+booked_js_vars.i18n_appt_required_fields_guest),resize_booked_modal(),!1):(("current"==e&&o||"guest"==e&&i&&!r&&!l||"guest"==e&&i&&r&&s&&!l||"guest"==e&&i&&l&&d&&!r||"guest"==e&&i&&l&&d&&r&&s)&&u.currentUserOrGuest(),void("new"==e&&t&&c&&p&&(!n||a)&&u.newUser()))}),{formSelector:"#newAppointmentForm",formBtnRequestSelector:".booked-form input#submit-request-appointment",formStatusSelector:"p.status",formSubmitBtnSelector:"#submit-request-appointment",apptContainerSelector:".booked-appointment-details",baseFields:["guest_name","guest_surname","guest_email","action","customer_type","user_id"],apptFields:["appoinment","calendar_id","title","date","timestamp","timeslot"],userFields:["booked_appt_name","booked_appt_surname","booked_appt_email","booked_appt_password"],captchaFields:["captcha_word","captcha_code"],currentApptIndex:!1,currentApptCounter:!1,hasAnyErrors:!1,currentUserOrGuest:function(){var e,o=u._totalAppts();o&&(u._showLoadingMessage(),u._resetDefaultValues(),e=u._getBaseData(),u.currentApptIndex=0,u.currentApptCounter=1,u._doRequestAppointment(e,o))},newUser:function(){var e,o,t=u._totalAppts();t&&(u._showLoadingMessage(),u._resetDefaultValues(),e=u._getBaseData(),1<t?(o=_.extend(!(o=null),{},e),o=u._addUserRegistrationData(o),u._requestUserRegistration(o),e.customer_type="current"):e=u._addUserRegistrationData(e),u.currentApptIndex=0,u._doRequestAppointment(e,t))},_doRequestAppointment:function(o,t){var e=u.apptFields;0===u.currentApptIndex&&(u._hideCancelBtn(),u._disableSubmitBtn(),u.hasAnyErrors=!1);for(var a=_.extend(!0,{},o),n=0;n<e.length;n++)a[e[n]]=u._getFieldVal(e[n],u.currentApptIndex);var i=u._getFieldVal("calendar_id",u.currentApptIndex),a=u._addCustomFieldsData(a,i);u._getApptElement(u.currentApptIndex).hasClass("skip")?(u.currentApptIndex++,u.currentApptCounter++,u._doRequestAppointment(o,t,u.currentApptIndex)):_.ajax({type:"post",url:booked_js_vars.ajax_url,data:a,success:function(e){u._requestAppointmentResponseHandler(e),u.currentApptIndex++,setTimeout(function(){u.currentApptCounter===t?u.hasAnyErrors?(u._enableSubmitBtn(),u._showCancelBtn()):u._onAfterRequestAppointment():(u.currentApptCounter++,u._doRequestAppointment(o,t))},100)}})},_totalAppts:function(){return _(u.formSelector+' input[name="appoinment[]"]').length},_getBaseData:function(){for(var e={},o=u.baseFields,t=0;t<o.length;t++)e[o[t]]=u._getFieldVal(o[t]);return e.nonce=booked_js_vars.nonce,e.is_fe_form=!0,e.total_appts=u._totalAppts(),e},_getFieldVal:function(e,o){e=void 0===e?"":e;var t=u.formSelector+" ";return(!1===(o=void 0!==o&&o)?_(t+=" [name="+e+"]"):_(t+=' [name="'+e+'[]"]').eq(o)).val()},_resetDefaultValues:function(){_(".booked-form input").each(function(){var e=_(this).val();_(this).attr("title")==e&&_(this).val("")})},_resetToDefaultValues:function(){_(".booked-form input").each(function(){var e=_(this).val(),o=_(this).attr("title");e||_(this).val(o)})},_addUserRegistrationData:function(a){return _.each(u.userFields,function(e,o){a[o]=u._getFieldVal(o)}),_.each(u.captchaFields,function(e,o){var t=u._getFieldVal(o);t&&(a[o]=t)}),a},_addCustomFieldsData:function(n,t){return _(".cf-block [name]").filter(function(e){var o=_(this);return parseInt(o.data("calendar-id"))===parseInt(t)&&o.attr("name").match(/---\d+/g)}).each(function(e){var o=_(this),t=o.attr("name"),a=o.val();o.attr("type"),a&&(!t.match(/checkbox|radio+/g)||t.match(/radio+/g)&&o.is(":checked")?n[t]=a:((!t.match(/radio+/g)&&void 0===n[t]||!t.match(/radio+/g)&&n[t].constructor!==Array)&&(n[t]=[]),o.is(":checked")&&n[t].push(a)))}),n},_requestUserRegistration:function(e,o){_.ajax({type:"post",url:booked_js_vars.ajax_url,data:e,async:!1,success:function(e){u._requestUserRegistrationResponseHandler(e)}})},_requestUserRegistrationResponseHandler:function(e){e=e.split("###");e[0].substr(e[0].length-5)},_requestAppointment:function(e){u._requestAppointmentResponseHandler(e)},_requestAppointmentResponseHandler:function(e){e=e.split("###");"error"!==e[0].substr(e[0].length-5)?u._requestAppointmentOnSuccess(e):u._requestAppointmentOnError(e)},_requestAppointmentOnError:function(e){var o=u._getApptElement();_(r).trigger("booked-on-requested-appt-error",[o]),u._highlightAppt(),u._setStatusMsg(e[1]),u.hasAnyErrors=!0,resize_booked_modal()},_requestAppointmentOnSuccess:function(e){var o=u._getApptElement();_(r).trigger("booked-on-requested-appt-success",[o]),u._unhighlightAppt()},_onAfterRequestAppointment:function(){var e={redirect:!1};_(r).trigger("booked-on-requested-appointment",[e]),e.redirect||(booked_js_vars.profilePage?s.location=booked_js_vars.profilePage:(u._reloadApptsList(),u._reloadCalendarTable()))},_setStatusMsg:function(e){var o=u.formSelector+" "+u.formStatusSelector;_(o).show().html('<i class="fa-solid fa-triangle-exclamation" style="color:#E35656"></i>&nbsp;&nbsp;&nbsp;'+e)},_getApptElement:function(e){e=void 0===e?u.currentApptIndex:e;var o=u.formSelector+" "+u.apptContainerSelector;return _(o).eq(e)},_highlightAppt:function(e){var o=u._getApptElement();o.length&&o.addClass("has-error")},_unhighlightAppt:function(e){var o=u._getApptElement();o.length&&o.removeClass("has-error").addClass("skip")},_enableSubmitBtn:function(){var e=u.formSelector+" "+u.formSubmitBtnSelector;_(e).attr("disabled",!1)},_disableSubmitBtn:function(){var e=u.formSelector+" "+u.formSubmitBtnSelector;_(e).attr("disabled",!0)},_showCancelBtn:function(){_(u.formSelector).find("button.cancel").show()},_hideCancelBtn:function(){_(u.formSelector).find("button.cancel").hide()},_showLoadingMessage:function(){_("form#newAppointmentForm p.status").show().html('<i class="fa-solid fa-circle-notch fa-spin"></i>&nbsp;&nbsp;&nbsp;'+booked_js_vars.i18n_please_wait)},_reloadApptsList:function(){_(".booked-appt-list").length&&_(".booked-appt-list").each(function(){var e=_(this),o=e.attr("data-list-date"),t=e.parents(".booked-list-view"),a=void 0!==(a=t.attr("data-default"))&&a,e=parseInt(e.find(".booked-list-view-nav").attr("data-calendar-id"))||0||0,o=(t.addClass("booked-loading"),{action:"booked_appointment_list_date",nonce:booked_js_vars.nonce,date:o,calendar_id:e,force_default:a});_(r).trigger("booked-before-loading-appointment-list-booking-options"),t.spin("booked_top"),_.ajax({url:booked_js_vars.ajax_url,type:"post",data:o,success:function(e){t.html(e),close_booked_modal(),i(),setTimeout(function(){t.removeClass("booked-loading")},1)}})})},_reloadCalendarTable:function(){var e,o;_(".bc-col.active").length&&(e=(o=_(".bc-col.active")).attr("data-date"),o=parseInt(o.parents("table").data("calendar-id"))||0,booked_load_calendar_date_booking_options={action:"booked_calendar_date",nonce:booked_js_vars.nonce,date:e,calendar_id:o},_(r).trigger("booked-before-loading-calendar-booking-options"),_.ajax({url:booked_js_vars.ajax_url,type:"post",data:booked_load_calendar_date_booking_options,success:function(e){_(".bc-row.entryBlock").find(".bc-col").html(e),close_booked_modal(),_(".bc-row.entryBlock").removeClass("booked-loading"),_(".bc-row.entryBlock").find(".booked-appt-list").hide().fadeIn(300),_(".bc-row.entryBlock").find(".booked-appt-list").addClass("shown"),adjust_calendar_boxes()}}))}})}),_(r).ajaxStop(function(){l(!1)});var a={bookingModalSelector:".booked-modal",tabSelector:".booked-tabs",tabNavSelector:".booked-tabs-nav span",tabCntSelector:".booked-tabs-cnt",Init:function(){_(r).on("click",this.tabNavSelector,this.tabsNav)},tabsNav:function(e){e.preventDefault(),a.switchToTab(_(this)),a.maybeResizeBookingModal()},switchToTab:function(e){var o="."+e.data("tab-cnt"),t=e.parents(a.tabSelector);e.addClass("active").siblings().removeClass("active"),t.find(a.tabCntSelector+" "+o).addClass("active").siblings().removeClass("active")},maybeResizeBookingModal:function(){_(a.bookingModalSelector).length&&resize_booked_modal()}}}(jQuery,window,document);var previousRealModalHeight=100;function resize_booked_modal(){var e,o=jQuery(window).height(),t=jQuery(window).width();jQuery(".booked-modal .bm-window .booked-scrollable").length?(e=jQuery(".booked-modal .bm-window .booked-scrollable")[0].scrollHeight)<100?e=previousRealModalHeight:previousRealModalHeight=e:e=0;var a,n,t=720<t?(n=(a=(o<e+43+43?o-43-43:e)-25)-15,(a+78)/2):(n=(a=o-43)-60,a/2);jQuery(".booked-modal").css({"margin-top":"-"+t+"px"}),jQuery(".booked-modal .bm-window").css({"max-height":a+"px"}),jQuery(".booked-modal .bm-window .booked-scrollable").css({"max-height":n+"px"})}function close_booked_modal(){var e=jQuery(".booked-modal");e.fadeOut(200),e.addClass("bm-closing"),jQuery("body").removeClass("booked-noScroll"),setTimeout(function(){e.remove()},300)}function init_tooltips(e){jQuery(".tooltipster").tooltipster({theme:"tooltipster-light",animation:"grow",speed:200,delay:50,offsetY:-15})}function adjust_calendar_boxes(){jQuery("div.booked-calendar").each(function(){var e=jQuery(window).width(),o=jQuery(this).parents(".booked-calendar-wrap").hasClass("small"),t=jQuery(this).find(".bc-body .bc-row.week .bc-col").width();jQuery(this).height();boxesHeight=+t,jQuery(this).find(".bc-body .bc-row.week .bc-col").height(boxesHeight),jQuery(this).find(".bc-body .bc-row.week .bc-col .date").css("line-height",boxesHeight+"px"),jQuery(this).find(".bc-body .bc-row.week .bc-col .date .number").css("line-height",boxesHeight+"px"),o||e<720?jQuery(this).find(".bc-body .bc-row.week .bc-col .date .number").css("line-height",boxesHeight+"px"):jQuery(this).find(".bc-body .bc-row.week .bc-col .date .number").css("line-height",""),t=jQuery(this).height(),jQuery(this).parent().height(t)})}